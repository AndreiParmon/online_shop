<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>{% block title %}KliMiron{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="/static/images/favicon(header).png" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<!-- Рекламное модальное окно -->
<div class="ad-modal-overlay" id="adModal">
    <div class="ad-modal-content">
        <button class="ad-close-btn" id="closeAdModal">&times;</button>
        <!-- Добавляем изображение -->
        <div class="ad-image-container">
            <img src="/static/images/lazernaya-gravirovka.png" alt="lazernaya-gravirovka" class="ad-image">
            <div class="ad-image-overlay">
                <span class="ad-badge">-20%</span>
            </div>
        </div>

        <div class="ad-icon">
            <i class="fas fa-gift"></i>
        </div>
        <h2 class="ad-title">Специальное предложение!</h2>
        {#        <div class="ad-discount-badge">#}
        {#            СКИДКА 20%#}
        {#        </div>#}
        {#        <p>Для новых покупателей</p>#}
        <div class="ad-promo-code">
            при покупке любого товара - скидка на гравировку 20%
        </div>
        {#        <p>Используйте промокод при оформлении заказа</p>#}

        {#        <div class="ad-features">#}
        {#            <div class="ad-feature">#}
        {#                <i class="fas fa-check-circle"></i>#}
        {#                Гарантия качества на все товары#}
        {#            </div>#}
        {#            <div class="ad-feature">#}
        {#                <i class="fas fa-check-circle"></i>#}
        {#                Быстрая обработка заказов#}
        {#            </div>#}
        {#        </div>#}

        <button class="ad-cta-button" id="startShoppingBtn">
            <i class="fas fa-shopping-bag"></i>
            Начать покупки
        </button>

        {#        <p class="ad-note">*Предложение действительно для новых покупателей</p>#}
    </div>
</div>
<!-- ---------------------- -->

<header class="header">
    <div class="container">
        <div class="header-content">
            <div class="logo">
                <a href="/"><img src="/static/images/favicon(header).png" alt="logo" height="50" width="50">KliMiron</a>
            </div>

            <!-- Центрированная навигация без рамки -->
            <nav class="nav-centered">
                <div class="nav-links">
                    <a href="{% url 'shop:product_list' %}" class="nav-link">Главная</a>
                    <a href="{% url 'shop:contacts' %}" class="nav-link">Контакты</a>
                </div>
            </nav>

            <div class="header-actions">

                <!-- Переключатель темы -->
                <div class="theme-switcher">
                    <button id="theme-toggle" class="theme-toggle" aria-label="Переключить тему"
                            title="Переключить тему">
                        <i class="fas fa-sun theme-icon-light"></i>
                        <i class="fas fa-moon theme-icon-dark"></i>
                        <span class="theme-toggle-slider"></span>
                    </button>
                </div>

                <a href="{% url 'shop:cart_detail' %}" class="cart-link" id="cart-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cart-count">
                        {% if cart_total_quantity > 0 %}{{ cart_total_quantity }}{% endif %}
                    </span>
                </a>

                <!-- Выпадающее меню для мобильной версии -->
                <div class="mobile-dropdown">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="{% url 'shop:product_list' %}" class="dropdown-link">
                            <i class="fas fa-home"></i>
                            Главная
                        </a>
                        <a href="{% url 'shop:contacts' %}" class="dropdown-link">
                            <i class="fas fa-phone"></i>
                            Контакты
                        </a>
                        <!-- Переключатель темы в мобильном меню -->
                        <a href="#" class="dropdown-link" id="theme-toggle-mobile">
                            <i class="fas fa-moon"></i>
                            <span>Тёмная тема</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="main">
    {% if messages %}
        <div class="messages-container" id="messages-container">
            {% for message in messages %}
                {% if forloop.first %}
                    <div class="message {{ message.tags }}" id="message-{{ forloop.counter }}"
                         data-message-id="{{ forloop.counter }}">
                        <div class="message-content">
                            {{ message }}
                        </div>
                        <button type="button" class="message-close"
                                onclick="removeMessage('message-{{ forloop.counter }}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}

    {% block content %}
    {% endblock %}
</main>

<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h3>© {% now "Y" %} KliMiron</h3>
            </div>
        </div>
    </div>
</footer>

<script src="/static/js/base.js" defer></script>
<script src="/static/js/theme.js" defer></script>

</body>
</html>